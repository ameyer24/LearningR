---
title: "Electronic Resource Report"
author: "AJM"
date: "August 30, 2017"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
	message = FALSE,
	warning = FALSE
)
library(mosaic)
library(xlsx)
library(tidyverse)
library(readxl)
library(zoo)
library(lubridate)
library(scales)
library(knitr)

# Setting up the folders
input.folder <- "C:/DataScience/inputs"
output.folder <- "C:/DataScience/outputs"
DB1folder <- "C:/DataScience/inputs/DB1Reports"
JR1folder <- "C:/DataScience/inputs/JR1Reports"
```

```{r Data and Function Import, message=FALSE, warning=FALSE, include=FALSE, paged.print=FALSE}
# I could probably clean this up to import everything...
source("1a - ImportTidy - DB1.R")
source("2a - Transform - DBUsage.R")
source("1c - ImportTidy - Financials.R")
source("2b2 - Transform - Financial Details.R")
source("2c - Transform - DBCostPerUse.R")
```

```{r Database Set Up}
# Defining Variables to make life easier throughout this report.
Database = "Communication & Mass Media Complete"
StartYear = 2014
EndYear = 2018
```

This is a report for `r Database` from `r StartYear` to `r EndYear`.

## Database Usage

```{r Database Usage Set Up, echo=FALSE, message=FALSE, warning=FALSE, paged.print=TRUE}
# Creates master of usage (by academic term)
# Planning on filtering this data in each subsection.
master.usage.table <- usage.sum.database.acad.term(Database, StartYear, EndYear)
```
This section of the report shows database usage by looking at Counter Reports.

```{r Overview Graph}
# Put the database overview graph here.
usage.graph.database(Database, StartYear, EndYear)

```

### Database Usage - Record Views
```{r}
record.views <- master.usage.table %>%
  filter(User_Activity == "Record Views") %>%
  ungroup() %>%
  select(-Database)

kable(record.views)
```

```{r}
usage.graph.database.acad.term(Database, StartYear, EndYear)
```

\newpage
## Financial Information

```{r}
kable(cost.database.change(Database, StartYear, EndYear))
```


```{r}
# Cost Graph
cost.database.graph(Database, StartYear, EndYear)
```

\newpage
## Cost Per Use

```{r}
cpu.database.graph(Database, StartYear, EndYear)
```


